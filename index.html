<!-- ğŸ”’ Firebase Integration - SECURE VERSION -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, enableIndexedDbPersistence } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
  import { getAuth, setPersistence, browserSessionPersistence, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ù…ÙØ§ØªÙŠØ­Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Firebase Console
  const firebaseConfig = {
    apiKey: "TU_NUEVA_API_KEY_AQUI", // ğŸ”„ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¬Ø¯ÙŠØ¯
    authDomain: "TU_DOMINIO.firebaseapp.com",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_PROJECT_ID.firebasestorage.app",
    messagingSenderId: "TU_SENDER_ID",
    appId: "TU_APP_ID"
  };

  try {
    // ØªÙ‡ÙŠØ¦Ø© Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    // ğŸ”’ ØªØ¹Ø²ÙŠØ² Ø£Ù…Ø§Ù† Ø§Ù„Ø¬Ù„Ø³Ø© (Ù„Ø§ Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„ØªØ³Ø¬ÙŠÙ„)
    setPersistence(auth, browserSessionPersistence);

    // ğŸ”’ ØªÙ…ÙƒÙŠÙ† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    enableIndexedDbPersistence(db).catch((err) => {
      console.warn('âš ï¸ ØªØ¹Ø°Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª:', err.code);
    });

    // ğŸ”’ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    auth.onAuthStateChanged((user) => {
      const userStatus = document.getElementById('user-status');
      if (user && user.emailVerified) {
        userStatus.textContent = `ğŸ‘‘ Ø§Ù„Ù‚ÙŠØµØ±: ${user.email}`;
        userStatus.style.color = '#10B981';
        console.log('âœ… Ø§Ù„Ù‚ÙŠØµØ± Ù…Ø³Ø¬Ù„:', user.email);
      } else {
        userStatus.textContent = 'ğŸ”’ Ù„Ù… ÙŠØªÙ… ØªØªÙˆÙŠØ¬ Ø§Ù„Ù‚ÙŠØµØ± Ø¨Ø¹Ø¯';
        userStatus.style.color = '#9CA3AF';
      }
    });

    // ğŸ”’ Ø­ÙØ¸ Firebase ÙÙŠ Ù†Ø·Ø§Ù‚ Ø¢Ù…Ù†
    window.caesarFirebase = { 
      app, 
      db, 
      auth,
      // ğŸ”’ ØªØµØ¯ÙŠØ± Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ© ÙÙ‚Ø·
      createUser: createUserWithEmailAndPassword,
      signIn: signInWithEmailAndPassword,
      signOut: signOut
    };

    console.log('ğŸ† Firebase Ø¬Ø§Ù‡Ø² Ø¨Ø£Ù…Ø§Ù† Ù„Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù‚ÙŠØµØ±ÙŠØ©!');

  } catch (error) {
    console.error('ğŸ”¥ Ø®Ø·Ø£ Ø­Ø±Ø¬ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Firebase:', error);
    alert('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù„ÙƒÙŠ. ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.');
  }
</script>
